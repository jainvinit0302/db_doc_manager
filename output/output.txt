POSTGRES
CREATE TABLE IF NOT EXISTS dw.mart.dim_product (
  product_id INTEGER PRIMARY KEY,
  sku VARCHAR(64) UNIQUE NOT NULL,
  product_name VARCHAR(256) NOT NULL,
  category VARCHAR(128),
  price DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS dw.mart.dim_customer (
  customer_id INTEGER PRIMARY KEY,
  name VARCHAR(256),
  email VARCHAR(320) UNIQUE NOT NULL,
  signup_date DATE,
  country VARCHAR(64)
);

CREATE TABLE IF NOT EXISTS dw.mart.fact_sales (
  sale_id BIGINT PRIMARY KEY,
  product_id INTEGER REFERENCES dw.mart.dim_product(product_id),
  customer_id INTEGER REFERENCES dw.mart.dim_customer(customer_id),
  quantity INTEGER,
  total_amount DECIMAL(12,2),
  sale_date DATE
);


MYSQL
CREATE TABLE IF NOT EXISTS dw.mart.dim_product (
  product_id INT PRIMARY KEY,
  sku VARCHAR(64) UNIQUE NOT NULL,
  product_name VARCHAR(256) NOT NULL,
  category VARCHAR(128),
  price DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS dw.mart.dim_customer (
  customer_id INT PRIMARY KEY,
  name VARCHAR(256),
  email VARCHAR(320) UNIQUE NOT NULL,
  signup_date DATE,
  country VARCHAR(64)
);

CREATE TABLE IF NOT EXISTS dw.mart.fact_sales (
  sale_id BIGINT PRIMARY KEY,
  product_id INT,
  customer_id INT,
  quantity INT,
  total_amount DECIMAL(12,2),
  sale_date DATE,
  FOREIGN KEY (product_id) REFERENCES dw.mart.dim_product(product_id),
  FOREIGN KEY (customer_id) REFERENCES dw.mart.dim_customer(customer_id)
);


SNOWFLAKE
CREATE OR REPLACE TABLE dw.mart.dim_product (
  product_id INTEGER,
  sku VARCHAR(64) UNIQUE NOT NULL,
  product_name VARCHAR(256) NOT NULL,
  category VARCHAR(128),
  price NUMBER(10,2),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
  PRIMARY KEY (product_id)
);

CREATE OR REPLACE TABLE dw.mart.dim_customer (
  customer_id INTEGER,
  name VARCHAR(256),
  email VARCHAR(320) UNIQUE NOT NULL,
  signup_date DATE,
  country VARCHAR(64),
  PRIMARY KEY (customer_id)
);

CREATE OR REPLACE TABLE dw.mart.fact_sales (
  sale_id BIGINT,
  product_id INTEGER,
  customer_id INTEGER,
  quantity INTEGER,
  total_amount NUMBER(12,2),
  sale_date DATE,
  PRIMARY KEY (sale_id)
);

MongoDB

dim_customer

db.createCollection("dim_customer", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: ["customer_id", "email"],   // email NOT NULL
      properties: {
        customer_id: { bsonType: "int" },
        name: { bsonType: "string" },
        email: { bsonType: "string" },
        signup_date: { bsonType: ["date", "null"] },
        country: { bsonType: ["string", "null"] }
      }
    }
  }
});

dim_product

db.createCollection("dim_product", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: ["product_id", "sku", "product_name"],
      properties: {
        product_id: { bsonType: "int" },
        sku: { bsonType: "string" },
        product_name: { bsonType: "string" },
        category: { bsonType: ["string", "null"] },
        price: { bsonType: ["double", "decimal", "null"] },
        created_at: { bsonType: ["date", "null"] }
      }
    }
  }
});

fact_sales
db.createCollection("fact_sales", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: [
        "sale_id",
        "product_id",
        "customer_id",
        "quantity",
        "total_amount",
        "sale_date"
      ],
      properties: {
        sale_id: { bsonType: "int" },
        product_id: { bsonType: "int" },
        customer_id: { bsonType: "int" },
        quantity: { bsonType: "int" },
        total_amount: { bsonType: ["double", "decimal"] },
        sale_date: { bsonType: "date" }
      }
    }
  }
});
